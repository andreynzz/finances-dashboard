<div class="dashboard-wrapper" #contentWrapper>

  <app-header></app-header>

  <main>
    <div class="page-header header-animate">
      <div class="texts">
        <h2>{{ 'DASHBOARD.TITLE' | translate }}</h2>
        <p>{{ 'DASHBOARD.DESCRIPTION' | translate }}</p>
      </div>

      <button (click)="toggleModal(true)" class="btn-new-transaction">
        <span class="icon">+</span>
        <span>Nova Transação</span>
      </button>
    </div>

    <div class="bento-grid">

      <div class="bento-item summary-section">
        <app-summary-cards [transactions]="transactions"></app-summary-cards>
      </div>

      <div class="bento-item chart-section">
        <app-financial-chart [transactions]="transactions"></app-financial-chart>
      </div>

      <div class="bento-item list-section">
        <div class="section-header-compact">
          <h3>{{ 'DASHBOARD.LAST_TRANSACTIONS' | translate }}</h3>

          <div class="pill-filters">
            <button [class.active]="currentFilter === 'all'" (click)="setFilter('all')">Tudo</button>
            <button [class.active]="currentFilter === 'income'" (click)="setFilter('income')">Entradas</button>
            <button [class.active]="currentFilter === 'expense'" (click)="setFilter('expense')">Saídas</button>
          </div>
        </div>

        <div class="scrollable-list">
          <app-transaction-list
            [transactions]="transactions"
            [isLoading]="isLoading"
            (delete)="handleDeleteTransaction($any($event))"
          >
          </app-transaction-list>
        </div>
      </div>

    </div>

    <app-new-transaction-modal
      *ngIf="isModalOpen"
      (close)="toggleModal(false)"
      (save)="handleAddTransaction($event)">
    </app-new-transaction-modal>
  </main>
</div>
